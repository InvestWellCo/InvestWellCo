<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Real Estate Inquiry</title>
    <link rel="icon" href="https://github.com/InvestWellCo/InvestWellCo/blob/main/logo%20inveddssssst%20well.png?raw=true" type="image/png">
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;700&display=swap" rel="stylesheet">
    <style>
        /* existing CSS */
        .form-container button:disabled {
            background-color: #c1c1c1; /* Disable color */
            cursor: not-allowed;
        }
    </style>
</head>
<body>
    <!-- existing HTML structure -->

    <script>
        let isEnglish = false;

        function toggleLanguage() {
            // existing language toggle function code
        }

        function updatePhoneCode() {
            const countrySelect = document.getElementById('country');
            const countryCodeInput = document.getElementById('country-code');
            const selectedCode = countrySelect.options[countrySelect.selectedIndex].dataset.code;
            countryCodeInput.value = selectedCode;

            countryCodeInput.style.display = countrySelect.value === "OTHER" ? "none" : "inline-block";
            validatePhone(); // Validate phone after code change
        }

        function validatePhone() {
            const phoneInput = document.getElementById("phone");
            const countryCode = document.getElementById("country-code").value;
            const phonePattern = {
                "+20": /^01[0-9]{9}$/,         // مصر
                "+966": /^5[0-9]{8}$/,         // السعودية
                "+971": /^5[0-9]{8}$/,         // الإمارات
                "+965": /^[569][0-9]{7}$/,     // الكويت
                "+1": /^[2-9][0-9]{9}$/        // الولايات المتحدة
                // Add other countries as needed
            };

            const pattern = phonePattern[countryCode] || /^[0-9]{7,15}$/; // General fallback pattern
            phoneInput.setCustomValidity(
                pattern.test(phoneInput.value) ? "" : "Please enter a valid phone number for the selected country"
            );
        }

        function validateForm() {
            const requiredFields = [
                "name", "email", "phone", "contact-method"
            ];
            let isValid = requiredFields.every(field => document.getElementById(field).checkValidity());
            document.getElementById("submit-btn").disabled = !isValid;
        }

        document.getElementById("phone").addEventListener("input", validatePhone);
        document.querySelectorAll("input, select, textarea").forEach(element => {
            element.addEventListener("input", validateForm);
        });

        window.onload = function() {
            updatePhoneCode();
            toggleLanguage();
            validateForm(); // Check form validation on load
        };
    </script>
</body>
</html>
